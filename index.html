<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-first" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/07/first/" class="article-date">
  <time datetime="2017-07-07T13:21:07.000Z" itemprop="datePublished">2017-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/07/first/">first</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="关于reg"><a href="#关于reg" class="headerlink" title="关于reg"></a>关于reg</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">一、校验数字的表达式</div><div class="line"> 1 数字：^[0-9]*$</div><div class="line"> 2 n位的数字：^\d&#123;n&#125;$</div><div class="line"> 3 至少n位的数字：^\d&#123;n,&#125;$</div><div class="line"> 4 m-n位的数字：^\d&#123;m,n&#125;$</div><div class="line"> 5 零和非零开头的数字：^(0|[1-9][0-9]*)$</div><div class="line"> 6 非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$</div><div class="line"> 7 带1-2位小数的正数或负数：^(\-)?\d+(\.\d&#123;1,2&#125;)?$</div><div class="line"> 8 正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$</div><div class="line"> 9 有两位小数的正实数：^[0-9]+(.[0-9]&#123;2&#125;)?$</div><div class="line">10 有1~3位小数的正实数：^[0-9]+(.[0-9]&#123;1,3&#125;)?$</div><div class="line">11 非零的正整数：^[1-9]\d*$ 或 ^([1-9][0-9]*)&#123;1,3&#125;$ 或 ^\+?[1-9][0-9]*$</div><div class="line">12 非零的负整数：^\-[1-9][]0-9<span class="string">"*$ 或 ^-[1-9]\d*$</span></div><div class="line">13 非负整数：^\d+$ 或 ^[1-9]\d*|0$</div><div class="line">14 非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</div><div class="line">15 非负浮点数：^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</div><div class="line">16 非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</div><div class="line">17 正浮点数：^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</div><div class="line">18 负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</div><div class="line">19 浮点数：^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</div><div class="line">二、校验字符的表达式</div><div class="line"> 1 汉字：^[\u4e00-\u9fa5]&#123;0,&#125;$</div><div class="line"> 2 英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]&#123;4,40&#125;$</div><div class="line"> 3 长度为3-20的所有字符：^.&#123;3,20&#125;$</div><div class="line"> 4 由26个英文字母组成的字符串：^[A-Za-z]+$</div><div class="line"> 5 由26个大写英文字母组成的字符串：^[A-Z]+$</div><div class="line"> 6 由26个小写英文字母组成的字符串：^[a-z]+$</div><div class="line"> 7 由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$</div><div class="line"> 8 由数字、26个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w&#123;3,20&#125;$</div><div class="line"> 9 中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$</div><div class="line">10 中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]&#123;2,20&#125;$</div><div class="line">11 可以输入含有^%&amp;',;=?$\"等字符：[^%&amp;',;=?$\x22]+</div><div class="line">12 禁止输入含有~的字符：[^~\x22]+</div><div class="line">三、特殊需求表达式</div><div class="line"> 1 Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</div><div class="line"> 2 域名：[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?</div><div class="line"> 3 InternetURL：[a-zA-z]+://[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</div><div class="line"> 4 手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</div><div class="line"> 5 电话号码("XXX-XXXXXXX<span class="string">"、"</span>XXXX-XXXXXXXX<span class="string">"、"</span>XXX-XXXXXXX<span class="string">"、"</span>XXX-XXXXXXXX<span class="string">"、"</span>XXXXXXX<span class="string">"和"</span>XXXXXXXX)：^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$ </div><div class="line"> 6 国内电话号码(0511-4405222、021-87888822)：\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;</div><div class="line"> 7 身份证号(15位、18位数字)：^\d&#123;15&#125;|\d&#123;18&#125;$</div><div class="line"> 8 短身份证号码(数字、字母x结尾)：^([0-9])&#123;7,18&#125;(x|X)?$ 或 ^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</div><div class="line"> 9 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</div><div class="line">10 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w&#123;5,17&#125;$</div><div class="line">11 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$  </div><div class="line">12 日期格式：^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</div><div class="line">13 一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</div><div class="line">14 一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$ </div><div class="line">15 钱的输入格式：</div><div class="line">16    1.有四种钱的表示形式我们可以接受:<span class="string">"10000.00"</span> 和 <span class="string">"10,000.00"</span>, 和没有 <span class="string">"分"</span> 的 <span class="string">"10000"</span> 和 <span class="string">"10,000"</span>：^[1-9][0-9]*$ </div><div class="line">17    2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符<span class="string">"0"</span>不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$ </div><div class="line">18    3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$ </div><div class="line">19    4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$ </div><div class="line">20    5.必须说明的是,小数点后面至少应该有1位数,所以<span class="string">"10."</span>是不通过的,但是 <span class="string">"10"</span> 和 <span class="string">"10.2"</span> 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$ </div><div class="line">21    6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$ </div><div class="line">22    7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$ </div><div class="line">23    8.1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$ </div><div class="line">24    备注：这就是最终结果了,别忘了<span class="string">"+"</span>可以用<span class="string">"*"</span>替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</div><div class="line">25 xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</div><div class="line">26 中文字符的正则表达式：[\u4e00-\u9fa5]</div><div class="line">27 双字节字符：[^\x00-\xff]    (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</div><div class="line">28 空白行的正则表达式：\n\s*\r    (可以用来删除空白行)</div><div class="line">29 HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\1&gt;|&lt;.*? /&gt;    (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</div><div class="line">30 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$)    (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</div><div class="line">31 腾讯QQ号：[1-9][0-9]&#123;4,&#125;    (腾讯QQ号从10000开始)</div><div class="line">32 中国邮政编码：[1-9]\d&#123;5&#125;(?!\d)    (中国邮政编码为6位数字)</div><div class="line">33 IP地址：\d+\.\d+\.\d+\.\d+    (提取IP地址时有用)</div><div class="line"></div><div class="line">密码强度:</div><div class="line">^([a-z].*[A-Z])|([A-Z].*[a-z])$</div><div class="line">只有大小写字母</div><div class="line">^([a-z].*[0-9])|([A-Z].*[0-9])|[0-9].*[a-zA-Z]$</div><div class="line">大小写字母和数字</div><div class="line">^[A-Za-z0-9]+[_][A-Za-z0-9]*</div><div class="line">大小写字母、数字和下划线</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/07/first/" data-id="cj4tw8rx40003swr3xexudbou" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/07/hello-world/" class="article-date">
  <time datetime="2017-07-07T11:43:53.232Z" itemprop="datePublished">2017-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/07/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/07/hello-world/" data-id="cj4tw8rx40004swr3guuql2th" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-AjaxXHR-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/AjaxXHR-js/" class="article-date">
  <time datetime="2017-06-25T09:08:57.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/25/AjaxXHR-js/">ajax Xhr</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ajax-Xhr"><a href="#ajax-Xhr" class="headerlink" title="ajax Xhr"></a>ajax Xhr</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    var categoryid = Number(window.location.search.slice(1).split(<span class="string">"="</span>)[1]);</div><div class="line">    var page = 1;//初始页面</div><div class="line">    var toggle = 0;//变换页面</div><div class="line"></div><div class="line">    //请求渲染初始页面</div><div class="line">    // $.ajax(&#123;</div><div class="line">    //     url:<span class="string">"http://127.0.0.1:9090/api/getmoneyctrl"</span>,</div><div class="line">    //     data:&#123;</div><div class="line">    //         pageid:page</div><div class="line">    //     &#125;,</div><div class="line">    //     success:<span class="keyword">function</span>(data)&#123;       </div><div class="line">    //         var str = template(<span class="string">"tpl"</span>,data);</div><div class="line">    //         var page = data.pagesize;</div><div class="line">    //         $(<span class="string">".money-ctrl&gt;ul"</span>).html(str);     </div><div class="line">    //     &#125;,</div><div class="line">    //     error:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    //         alert(<span class="string">"出错了!"</span>);</div><div class="line">    //     &#125;</div><div class="line">    // &#125;);</div><div class="line">    <span class="keyword">function</span> ajax(page)&#123;</div><div class="line">        $.ajax(&#123;</div><div class="line">            url:<span class="string">"http://127.0.0.1:9090/api/getmoneyctrl"</span>,</div><div class="line">            data:&#123;</div><div class="line">                pageid:page,</div><div class="line">                categoryid:categoryid</div><div class="line">            &#125;,</div><div class="line">            success:<span class="keyword">function</span>(data)&#123;</div><div class="line">                var str = template(<span class="string">"tpl"</span>,data);</div><div class="line">                $(<span class="string">"#main"</span>).html(str);</div><div class="line">                totalPage=parseInt(data.totalCount/data.pagesize);</div><div class="line">                var htmlStr=<span class="string">""</span>;</div><div class="line">                <span class="keyword">for</span>(var i=1;i&lt;=totalPage;i++)&#123;</div><div class="line">                    htmlStr+=<span class="string">'&lt;option&gt;'</span>+i+<span class="string">"/"</span>+totalPage+<span class="string">'&lt;/option&gt;'</span>;</div><div class="line"></div><div class="line">                &#125;</div><div class="line">                $(<span class="string">"#selectPage"</span>).html(htmlStr);</div><div class="line">                $(<span class="string">"option"</span>).eq(page).prop(<span class="string">"selected"</span>,<span class="literal">true</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">               </div><div class="line">                var select = document.getElementById(<span class="string">"selectPage"</span>);</div><div class="line">                 var optionArr = select.querySelectorAll(<span class="string">"option"</span>);</div><div class="line">                select.onchange = <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                    var arr=this.value.split(<span class="string">"/"</span>);</div><div class="line">                    ajax(arr[0]-1);</div><div class="line">                &#125;</div><div class="line">                $(<span class="string">"#prev"</span>).on(<span class="string">"click"</span>,<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                    <span class="keyword">if</span>(toggle&gt;0)&#123;</div><div class="line">                        toggle--;</div><div class="line">                    &#125;;</div><div class="line">                    ajax(toggle);</div><div class="line">                &#125;)</div><div class="line">                $(<span class="string">"#next"</span>).on(<span class="string">"click"</span>,<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                    <span class="keyword">if</span>(toggle&lt;totalPage)&#123;</div><div class="line">                        toggle++;</div><div class="line">                        ajax(toggle);</div><div class="line">                    &#125;                       </div><div class="line">                &#125;)</div><div class="line">            &#125;,</div><div class="line">            error:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                alert(<span class="string">"出错了!"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    ajax(toggle);</div><div class="line"></div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line">&#125;)();</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/AjaxXHR-js/" data-id="cj4tw8rx40000swr3b14fopr5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-again-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/again-test/" class="article-date">
  <time datetime="2017-06-25T09:08:57.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/25/again-test/">again test</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="just-test"><a href="#just-test" class="headerlink" title="just test"></a>just test</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> $(<span class="string">'.product&gt;.top&gt;.back&gt;span:eq(0)'</span>).html(back);</div><div class="line">$.ajax(&#123;</div><div class="line">    url: <span class="string">'http://127.0.0.1:9090/api/getproductlist?categoryid='</span>+obj.categoryId+<span class="string">'&amp;pageid=1'</span>,</div><div class="line">    dataType: <span class="string">'JSONP'</span>,</div><div class="line">    success: <span class="keyword">function</span> (data) &#123;</div><div class="line">        console.log(data);</div><div class="line">        var str = template(<span class="string">'TV'</span>, data);</div><div class="line">        n = Math.ceil(data.totalCount / data.pagesize)</div><div class="line">        <span class="keyword">for</span> (var i = 0; i &lt; n; i++) &#123;</div><div class="line">            var opt = document.createElement(<span class="string">'option'</span>);</div><div class="line">            opt.innerHTML=<span class="string">''</span>+(i+1)+<span class="string">'/'</span>+n;</div><div class="line">            $(<span class="string">'.yema&gt;.select&gt;select'</span>).append(opt);</div><div class="line">        &#125;</div><div class="line">        $(<span class="string">'.product&gt;div.body&gt;ul'</span>).html(str);</div><div class="line">        page = $(<span class="string">'.yema select'</span>).val().slice(0, 1);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/again-test/" data-id="cj4tw8rx40001swr3dkky7cbq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-json-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/json-js/" class="article-date">
  <time datetime="2017-06-25T09:08:57.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/25/json-js/">json.js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    json2.js</div><div class="line">    2017-10-08</div><div class="line"></div><div class="line">    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.</div><div class="line"></div><div class="line">    See http://www.JSON.org/js.html</div><div class="line"></div><div class="line">    This code should be minified before deployment.</div><div class="line">    See http://javascript.crockford.com/jsmin.html</div><div class="line"></div><div class="line">    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO</div><div class="line">    NOT CONTROL.</div><div class="line"></div><div class="line">    This file creates a global JSON object containing two methods: stringify</div><div class="line">    and parse.</div><div class="line"></div><div class="line">        JSON.stringify(value, replacer, space)</div><div class="line">            value       any JavaScript value, usually an object or array.</div><div class="line"></div><div class="line">            replacer    an optional parameter that determines how object</div><div class="line">                        values are stringified <span class="keyword">for</span> objects. It can be a</div><div class="line">                        <span class="keyword">function</span> or an array of strings.</div><div class="line"></div><div class="line">            space       an optional parameter that specifies the indentation</div><div class="line">                        of nested structures. If it is omitted, the text will</div><div class="line">                        be packed without extra whitespace. If it is a number,</div><div class="line">                        it will specify the number of spaces to indent at each</div><div class="line">                        level. If it is a string (such as <span class="string">'\t'</span> or <span class="string">'&amp;nbsp;'</span>),</div><div class="line">                        it contains the characters used to indent at each level.</div><div class="line"></div><div class="line">            This method produces a JSON text from a JavaScript value.</div><div class="line"></div><div class="line">            When an object value is found, <span class="keyword">if</span> the object contains a toJSON</div><div class="line">            method, its toJSON method will be called and the result will be</div><div class="line">            stringified. A toJSON method does not serialize: it returns the</div><div class="line">            value represented by the name/value pair that should be serialized,</div><div class="line">            or undefined <span class="keyword">if</span> nothing should be serialized. The toJSON method</div><div class="line">            will be passed the key associated with the value, and this will be</div><div class="line">            bound to the value</div><div class="line"></div><div class="line">            For example, this would serialize Dates as ISO strings.</div><div class="line"></div><div class="line">                Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                    <span class="keyword">function</span> f(n) &#123;</div><div class="line">                        // Format integers to have at least two digits.</div><div class="line">                        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="built_in">return</span> this.getUTCFullYear()   + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                         f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCSeconds())   + <span class="string">'Z'</span>;</div><div class="line">                &#125;;</div><div class="line"></div><div class="line">            You can provide an optional replacer method. It will be passed the</div><div class="line">            key and value of each member, with this bound to the containing</div><div class="line">            object. The value that is returned from your method will be</div><div class="line">            serialized. If your method returns undefined, <span class="keyword">then</span> the member will</div><div class="line">            be excluded from the serialization.</div><div class="line"></div><div class="line">            If the replacer parameter is an array of strings, <span class="keyword">then</span> it will be</div><div class="line">            used to select the members to be serialized. It filters the results</div><div class="line">            such that only members with keys listed <span class="keyword">in</span> the replacer array are</div><div class="line">            stringified.</div><div class="line"></div><div class="line">            Values that <span class="keyword">do</span> not have JSON representations, such as undefined or</div><div class="line">            <span class="built_in">functions</span>, will not be serialized. Such values <span class="keyword">in</span> objects will be</div><div class="line">            dropped; <span class="keyword">in</span> arrays they will be replaced with null. You can use</div><div class="line">            a replacer <span class="keyword">function</span> to replace those with JSON values.</div><div class="line">            JSON.stringify(undefined) returns undefined.</div><div class="line"></div><div class="line">            The optional space parameter produces a stringification of the</div><div class="line">            value that is filled with line breaks and indentation to make it</div><div class="line">            easier to <span class="built_in">read</span>.</div><div class="line"></div><div class="line">            If the space parameter is a non-empty string, <span class="keyword">then</span> that string will</div><div class="line">            be used <span class="keyword">for</span> indentation. If the space parameter is a number, <span class="keyword">then</span></div><div class="line">            the indentation will be that many spaces.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;]);</div><div class="line">            // text is <span class="string">'["e",&#123;"pluribus":"unum"&#125;]'</span></div><div class="line"></div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;], null, <span class="string">'\t'</span>);</div><div class="line">            // text is <span class="string">'[\n\t"e",\n\t&#123;\n\t\t"pluribus": "unum"\n\t&#125;\n]'</span></div><div class="line"></div><div class="line">            text = JSON.stringify([new Date()], <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                <span class="built_in">return</span> this[key] instanceof Date ?</div><div class="line">                    <span class="string">'Date('</span> + this[key] + <span class="string">')'</span> : value;</div><div class="line">            &#125;);</div><div class="line">            // text is <span class="string">'["Date(---current time---)"]'</span></div><div class="line"></div><div class="line"></div><div class="line">        JSON.parse(text, reviver)</div><div class="line">            This method parses a JSON text to produce an object or array.</div><div class="line">            It can throw a SyntaxError exception.</div><div class="line"></div><div class="line">            The optional reviver parameter is a <span class="keyword">function</span> that can filter and</div><div class="line">            transform the results. It receives each of the keys and values,</div><div class="line">            and its <span class="built_in">return</span> value is used instead of the original value.</div><div class="line">            If it returns what it received, <span class="keyword">then</span> the structure is not modified.</div><div class="line">            If it returns undefined <span class="keyword">then</span> the member is deleted.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            // Parse the text. Values that look like ISO date strings will</div><div class="line">            // be converted to Date objects.</div><div class="line"></div><div class="line">            myData = JSON.parse(text, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var a;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span>) &#123;</div><div class="line">                    a =</div><div class="line">/^(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)T(\d&#123;2&#125;):(\d&#123;2&#125;):(\d&#123;2&#125;(?:\.\d*)?)Z$/.<span class="built_in">exec</span>(value);</div><div class="line">                    <span class="keyword">if</span> (a) &#123;</div><div class="line">                        <span class="built_in">return</span> new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],</div><div class="line">                            +a[5], +a[6]));</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            myData = JSON.parse(<span class="string">'["Date(09/09/2001)"]'</span>, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var d;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span> &amp;&amp;</div><div class="line">                        value.slice(0, 5) === <span class="string">'Date('</span> &amp;&amp;</div><div class="line">                        value.slice(-1) === <span class="string">')'</span>) &#123;</div><div class="line">                    d = new Date(value.slice(5, -1));</div><div class="line">                    <span class="keyword">if</span> (d) &#123;</div><div class="line">                        <span class="built_in">return</span> d;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line"></div><div class="line">    This is a reference implementation. You are free to copy, modify, or</div><div class="line">    redistribute.</div><div class="line">*/</div><div class="line"></div><div class="line">/*jslint evil: <span class="literal">true</span>, regexp: <span class="literal">true</span> */</div><div class="line"></div><div class="line">/*members <span class="string">""</span>, <span class="string">"\b"</span>, <span class="string">"\t"</span>, <span class="string">"\n"</span>, <span class="string">"\f"</span>, <span class="string">"\r"</span>, <span class="string">"\""</span>, JSON, <span class="string">"\\"</span>, apply,</div><div class="line">    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,</div><div class="line">    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,</div><div class="line">    lastIndex, length, parse, prototype, push, replace, slice, stringify,</div><div class="line">    <span class="built_in">test</span>, toJSON, toString, valueOf</div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line">// Create a JSON object only <span class="keyword">if</span> one does not already exist. We create the</div><div class="line">// methods <span class="keyword">in</span> a closure to avoid creating global variables.</div><div class="line"></div><div class="line"><span class="keyword">if</span> (typeof JSON !== <span class="string">'object'</span>) &#123;</div><div class="line">    JSON = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    <span class="string">'use strict'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">function</span> f(n) &#123;</div><div class="line">        // Format integers to have at least two digits.</div><div class="line">        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (typeof Date.prototype.toJSON !== <span class="string">'function'</span>) &#123;</div><div class="line"></div><div class="line">        Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line"></div><div class="line">            <span class="built_in">return</span> isFinite(this.valueOf())</div><div class="line">                ? this.getUTCFullYear()     + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                    f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCSeconds())   + <span class="string">'Z'</span></div><div class="line">                : null;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        String.prototype.toJSON      =</div><div class="line">            Number.prototype.toJSON  =</div><div class="line">            Boolean.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                <span class="built_in">return</span> this.valueOf();</div><div class="line">            &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</div><div class="line">        escapable = /[\\\<span class="string">"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</span></div><div class="line">        gap,</div><div class="line">        indent,</div><div class="line">        meta = &#123;    // table of character substitutions</div><div class="line">            '\b': '\\b',</div><div class="line">            '\t': '\\t',</div><div class="line">            '\n': '\\n',</div><div class="line">            '\f': '\\f',</div><div class="line">            '\r': '\\r',</div><div class="line">            '"<span class="string">' : '</span>\\<span class="string">"',</span></div><div class="line">            '\\': '\\\\'</div><div class="line">        &#125;,</div><div class="line">        rep;</div><div class="line"></div><div class="line"></div><div class="line">    function quote(string) &#123;</div><div class="line"></div><div class="line">// If the string contains no control characters, no quote characters, and no</div><div class="line">// backslash characters, then we can safely slap some quotes around it.</div><div class="line">// Otherwise we must also replace the offending characters with safe escape</div><div class="line">// sequences.</div><div class="line"></div><div class="line">        escapable.lastIndex = 0;</div><div class="line">        return escapable.test(string) ? '"<span class="string">' + string.replace(escapable, function (a) &#123;</span></div><div class="line">            var c = meta[a];</div><div class="line">            return typeof c === 'string<span class="string">'</span></div><div class="line">                ? c</div><div class="line">                : '\\u<span class="string">' + ('</span>0000<span class="string">' + a.charCodeAt(0).toString(16)).slice(-4);</span></div><div class="line">        &#125;) + '<span class="string">"' : '"</span><span class="string">' + string + '</span><span class="string">"';</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    function str(key, holder) &#123;</div><div class="line"></div><div class="line">// Produce a string from holder[key].</div><div class="line"></div><div class="line">        var i,          // The loop counter.</div><div class="line">            k,          // The member key.</div><div class="line">            v,          // The member value.</div><div class="line">            length,</div><div class="line">            mind = gap,</div><div class="line">            partial,</div><div class="line">            value = holder[key];</div><div class="line"></div><div class="line">// If the value has a toJSON method, call it to obtain a replacement value.</div><div class="line"></div><div class="line">        if (value &amp;&amp; typeof value === 'object' &amp;&amp;</div><div class="line">                typeof value.toJSON === 'function') &#123;</div><div class="line">            value = value.toJSON(key);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// If we were called with a replacer function, then call the replacer to</div><div class="line">// obtain a replacement value.</div><div class="line"></div><div class="line">        if (typeof rep === 'function') &#123;</div><div class="line">            value = rep.call(holder, key, value);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// What happens next depends on the value's type.</div><div class="line"></div><div class="line">        switch (typeof value) &#123;</div><div class="line">        case 'string':</div><div class="line">            return quote(value);</div><div class="line"></div><div class="line">        case 'number':</div><div class="line"></div><div class="line">// JSON numbers must be finite. Encode non-finite numbers as null.</div><div class="line"></div><div class="line">            return isFinite(value) ? String(value) : 'null';</div><div class="line"></div><div class="line">        case 'boolean':</div><div class="line">        case 'null':</div><div class="line"></div><div class="line">// If the value is a boolean or null, convert it to a string. Note:</div><div class="line">// typeof null does not produce 'null'. The case is included here in</div><div class="line">// the remote chance that this gets fixed someday.</div><div class="line"></div><div class="line">            return String(value);</div><div class="line"></div><div class="line">// If the type is 'object', we might be dealing with an object or an array or</div><div class="line">// null.</div><div class="line"></div><div class="line">        case 'object':</div><div class="line"></div><div class="line">// Due to a specification blunder in ECMAScript, typeof null is 'object',</div><div class="line">// so watch out for that case.</div><div class="line"></div><div class="line">            if (!value) &#123;</div><div class="line">                return 'null';</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make an array to hold the partial results of stringifying this object value.</div><div class="line"></div><div class="line">            gap += indent;</div><div class="line">            partial = [];</div><div class="line"></div><div class="line">// Is the value an array?</div><div class="line"></div><div class="line">            if (Object.prototype.toString.apply(value) === '[object Array]') &#123;</div><div class="line"></div><div class="line">// The value is an array. Stringify every element. Use null as a placeholder</div><div class="line">// for non-JSON values.</div><div class="line"></div><div class="line">                length = value.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    partial[i] = str(i, value) || 'null';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// Join all of the elements together, separated with commas, and wrap them in</div><div class="line">// brackets.</div><div class="line"></div><div class="line">                v = partial.length === 0</div><div class="line">                    ? '[]'</div><div class="line">                    : gap</div><div class="line">                    ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'</div><div class="line">                    : '[' + partial.join(',') + ']';</div><div class="line">                gap = mind;</div><div class="line">                return v;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the replacer is an array, use it to select the members to be stringified.</div><div class="line"></div><div class="line">            if (rep &amp;&amp; typeof rep === 'object') &#123;</div><div class="line">                length = rep.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    if (typeof rep[i] === 'string') &#123;</div><div class="line">                        k = rep[i];</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; else &#123;</div><div class="line"></div><div class="line">// Otherwise, iterate through all of the keys in the object.</div><div class="line"></div><div class="line">                for (k in value) &#123;</div><div class="line">                    if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Join all of the member texts together, separated with commas,</div><div class="line">// and wrap them in braces.</div><div class="line"></div><div class="line">            v = partial.length === 0</div><div class="line">                ? '&#123;&#125;'</div><div class="line">                : gap</div><div class="line">                ? '&#123;\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '&#125;'</div><div class="line">                : '&#123;' + partial.join(',') + '&#125;';</div><div class="line">            gap = mind;</div><div class="line">            return v;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">// If the JSON object does not yet have a stringify method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.stringify !== 'function') &#123;</div><div class="line">        JSON.stringify = function (value, replacer, space) &#123;</div><div class="line"></div><div class="line">// The stringify method takes a value and an optional replacer, and an optional</div><div class="line">// space parameter, and returns a JSON text. The replacer can be a function</div><div class="line">// that can replace values, or an array of strings that will select the keys.</div><div class="line">// A default replacer method can be provided. Use of the space parameter can</div><div class="line">// produce text that is more easily readable.</div><div class="line"></div><div class="line">            var i;</div><div class="line">            gap = '';</div><div class="line">            indent = '';</div><div class="line"></div><div class="line">// If the space parameter is a number, make an indent string containing that</div><div class="line">// many spaces.</div><div class="line"></div><div class="line">            if (typeof space === 'number') &#123;</div><div class="line">                for (i = 0; i &lt; space; i += 1) &#123;</div><div class="line">                    indent += ' ';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// If the space parameter is a string, it will be used as the indent string.</div><div class="line"></div><div class="line">            &#125; else if (typeof space === 'string') &#123;</div><div class="line">                indent = space;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If there is a replacer, it must be a function or an array.</div><div class="line">// Otherwise, throw an error.</div><div class="line"></div><div class="line">            rep = replacer;</div><div class="line">            if (replacer &amp;&amp; typeof replacer !== 'function' &amp;&amp;</div><div class="line">                    (typeof replacer !== 'object' ||</div><div class="line">                    typeof replacer.length !== 'number')) &#123;</div><div class="line">                throw new Error('JSON.stringify');</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make a fake root object containing our value under the key of ''.</div><div class="line">// Return the result of stringifying the value.</div><div class="line"></div><div class="line">            return str('', &#123;'': value&#125;);</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">// If the JSON object does not yet have a parse method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.parse !== 'function') &#123;</div><div class="line">        JSON.parse = function (text, reviver) &#123;</div><div class="line"></div><div class="line">// The parse method takes a text and an optional reviver function, and returns</div><div class="line">// a JavaScript value if the text is a valid JSON text.</div><div class="line"></div><div class="line">            var j;</div><div class="line"></div><div class="line">            function walk(holder, key) &#123;</div><div class="line"></div><div class="line">// The walk method is used to recursively walk the resulting structure so</div><div class="line">// that modifications can be made.</div><div class="line"></div><div class="line">                var k, v, value = holder[key];</div><div class="line">                if (value &amp;&amp; typeof value === 'object') &#123;</div><div class="line">                    for (k in value) &#123;</div><div class="line">                        if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                            v = walk(value, k);</div><div class="line">                            if (v !== undefined) &#123;</div><div class="line">                                value[k] = v;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                delete value[k];</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                return reviver.call(holder, key, value);</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">// Parsing happens in four stages. In the first stage, we replace certain</div><div class="line">// Unicode characters with escape sequences. JavaScript handles many characters</div><div class="line">// incorrectly, either silently deleting them, or treating them as line endings.</div><div class="line"></div><div class="line">            text = String(text);</div><div class="line">            cx.lastIndex = 0;</div><div class="line">            if (cx.test(text)) &#123;</div><div class="line">                text = text.replace(cx, function (a) &#123;</div><div class="line">                    return '\\u' +</div><div class="line">                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// In the second stage, we run the text against regular expressions that look</div><div class="line">// for non-JSON patterns. We are especially concerned with '()' and 'new'</div><div class="line">// because they can cause invocation, and '=' because it can cause mutation.</div><div class="line">// But just to be safe, we want to reject all unexpected forms.</div><div class="line"></div><div class="line">// We split the second stage into 4 regexp operations in order to work around</div><div class="line">// crippling inefficiencies in IE's and Safari's regexp engines. First we</div><div class="line">// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we</div><div class="line">// replace all simple value tokens with ']' characters. Third, we delete all</div><div class="line">// open brackets that follow a colon or comma or that begin the text. Finally,</div><div class="line">// we look to see that the remaining characters are only whitespace or ']' or</div><div class="line">// ',' or ':' or '&#123;' or '&#125;'. If that is so, then the text is safe for eval.</div><div class="line"></div><div class="line">            if (/^[\],:&#123;&#125;\s]*$/</div><div class="line">                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g, <span class="string">'@'</span>)</div><div class="line">                        .replace(/<span class="string">"[^"</span>\\\n\r]*<span class="string">"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')</span></div><div class="line">                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) &#123;</div><div class="line"></div><div class="line">// In the third stage we use the eval function to compile the text into a</div><div class="line">// JavaScript structure. The '&#123;' operator is subject to a syntactic ambiguity</div><div class="line">// in JavaScript: it can begin a block or an object literal. We wrap the text</div><div class="line">// in parens to eliminate the ambiguity.</div><div class="line"></div><div class="line">                j = eval('(' + text + ')');</div><div class="line"></div><div class="line">// In the optional fourth stage, we recursively walk the new structure, passing</div><div class="line">// each name/value pair to a reviver function for possible transformation.</div><div class="line"></div><div class="line">                return typeof reviver === 'function'</div><div class="line">                    ? walk(&#123;'': j&#125;, '')</div><div class="line">                    : j;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the text is not JSON parseable, then a SyntaxError is thrown.</div><div class="line"></div><div class="line">            throw new SyntaxError('JSON.parse');</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/json-js/" data-id="cj4tw8rxk0005swr3lq96nc56" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-json-tool" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/json-tool/" class="article-date">
  <time datetime="2017-06-25T09:08:57.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/25/json-tool/">json.js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    json2.js</div><div class="line">    2012-10-08</div><div class="line"></div><div class="line">    Public Domain.</div><div class="line"></div><div class="line">    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.</div><div class="line"></div><div class="line">    See http://www.JSON.org/js.html</div><div class="line"></div><div class="line"></div><div class="line">    This code should be minified before deployment.</div><div class="line">    See http://javascript.crockford.com/jsmin.html</div><div class="line"></div><div class="line">    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO</div><div class="line">    NOT CONTROL.</div><div class="line"></div><div class="line"></div><div class="line">    This file creates a global JSON object containing two methods: stringify</div><div class="line">    and parse.</div><div class="line"></div><div class="line">        JSON.stringify(value, replacer, space)</div><div class="line">            value       any JavaScript value, usually an object or array.</div><div class="line"></div><div class="line">            replacer    an optional parameter that determines how object</div><div class="line">                        values are stringified <span class="keyword">for</span> objects. It can be a</div><div class="line">                        <span class="keyword">function</span> or an array of strings.</div><div class="line"></div><div class="line">            space       an optional parameter that specifies the indentation</div><div class="line">                        of nested structures. If it is omitted, the text will</div><div class="line">                        be packed without extra whitespace. If it is a number,</div><div class="line">                        it will specify the number of spaces to indent at each</div><div class="line">                        level. If it is a string (such as <span class="string">'\t'</span> or <span class="string">'&amp;nbsp;'</span>),</div><div class="line">                        it contains the characters used to indent at each level.</div><div class="line"></div><div class="line">            This method produces a JSON text from a JavaScript value.</div><div class="line"></div><div class="line">            When an object value is found, <span class="keyword">if</span> the object contains a toJSON</div><div class="line">            method, its toJSON method will be called and the result will be</div><div class="line">            stringified. A toJSON method does not serialize: it returns the</div><div class="line">            value represented by the name/value pair that should be serialized,</div><div class="line">            or undefined <span class="keyword">if</span> nothing should be serialized. The toJSON method</div><div class="line">            will be passed the key associated with the value, and this will be</div><div class="line">            bound to the value</div><div class="line"></div><div class="line">            For example, this would serialize Dates as ISO strings.</div><div class="line"></div><div class="line">                Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                    <span class="keyword">function</span> f(n) &#123;</div><div class="line">                        // Format integers to have at least two digits.</div><div class="line">                        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="built_in">return</span> this.getUTCFullYear()   + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                         f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCSeconds())   + <span class="string">'Z'</span>;</div><div class="line">                &#125;;</div><div class="line"></div><div class="line">            You can provide an optional replacer method. It will be passed the</div><div class="line">            key and value of each member, with this bound to the containing</div><div class="line">            object. The value that is returned from your method will be</div><div class="line">            serialized. If your method returns undefined, <span class="keyword">then</span> the member will</div><div class="line">            be excluded from the serialization.</div><div class="line"></div><div class="line">            If the replacer parameter is an array of strings, <span class="keyword">then</span> it will be</div><div class="line">            used to select the members to be serialized. It filters the results</div><div class="line">            such that only members with keys listed <span class="keyword">in</span> the replacer array are</div><div class="line">            stringified.</div><div class="line"></div><div class="line">            Values that <span class="keyword">do</span> not have JSON representations, such as undefined or</div><div class="line">            <span class="built_in">functions</span>, will not be serialized. Such values <span class="keyword">in</span> objects will be</div><div class="line">            dropped; <span class="keyword">in</span> arrays they will be replaced with null. You can use</div><div class="line">            a replacer <span class="keyword">function</span> to replace those with JSON values.</div><div class="line">            JSON.stringify(undefined) returns undefined.</div><div class="line"></div><div class="line">            The optional space parameter produces a stringification of the</div><div class="line">            value that is filled with line breaks and indentation to make it</div><div class="line">            easier to <span class="built_in">read</span>.</div><div class="line"></div><div class="line">            If the space parameter is a non-empty string, <span class="keyword">then</span> that string will</div><div class="line">            be used <span class="keyword">for</span> indentation. If the space parameter is a number, <span class="keyword">then</span></div><div class="line">            the indentation will be that many spaces.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;]);</div><div class="line">            // text is <span class="string">'["e",&#123;"pluribus":"unum"&#125;]'</span></div><div class="line"></div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;], null, <span class="string">'\t'</span>);</div><div class="line">            // text is <span class="string">'[\n\t"e",\n\t&#123;\n\t\t"pluribus": "unum"\n\t&#125;\n]'</span></div><div class="line"></div><div class="line">            text = JSON.stringify([new Date()], <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                <span class="built_in">return</span> this[key] instanceof Date ?</div><div class="line">                    <span class="string">'Date('</span> + this[key] + <span class="string">')'</span> : value;</div><div class="line">            &#125;);</div><div class="line">            // text is <span class="string">'["Date(---current time---)"]'</span></div><div class="line"></div><div class="line"></div><div class="line">        JSON.parse(text, reviver)</div><div class="line">            This method parses a JSON text to produce an object or array.</div><div class="line">            It can throw a SyntaxError exception.</div><div class="line"></div><div class="line">            The optional reviver parameter is a <span class="keyword">function</span> that can filter and</div><div class="line">            transform the results. It receives each of the keys and values,</div><div class="line">            and its <span class="built_in">return</span> value is used instead of the original value.</div><div class="line">            If it returns what it received, <span class="keyword">then</span> the structure is not modified.</div><div class="line">            If it returns undefined <span class="keyword">then</span> the member is deleted.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            // Parse the text. Values that look like ISO date strings will</div><div class="line">            // be converted to Date objects.</div><div class="line"></div><div class="line">            myData = JSON.parse(text, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var a;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span>) &#123;</div><div class="line">                    a =</div><div class="line">/^(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)T(\d&#123;2&#125;):(\d&#123;2&#125;):(\d&#123;2&#125;(?:\.\d*)?)Z$/.<span class="built_in">exec</span>(value);</div><div class="line">                    <span class="keyword">if</span> (a) &#123;</div><div class="line">                        <span class="built_in">return</span> new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],</div><div class="line">                            +a[5], +a[6]));</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            myData = JSON.parse(<span class="string">'["Date(09/09/2001)"]'</span>, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var d;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span> &amp;&amp;</div><div class="line">                        value.slice(0, 5) === <span class="string">'Date('</span> &amp;&amp;</div><div class="line">                        value.slice(-1) === <span class="string">')'</span>) &#123;</div><div class="line">                    d = new Date(value.slice(5, -1));</div><div class="line">                    <span class="keyword">if</span> (d) &#123;</div><div class="line">                        <span class="built_in">return</span> d;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line"></div><div class="line">    This is a reference implementation. You are free to copy, modify, or</div><div class="line">    redistribute.</div><div class="line">*/</div><div class="line"></div><div class="line">/*jslint evil: <span class="literal">true</span>, regexp: <span class="literal">true</span> */</div><div class="line"></div><div class="line">/*members <span class="string">""</span>, <span class="string">"\b"</span>, <span class="string">"\t"</span>, <span class="string">"\n"</span>, <span class="string">"\f"</span>, <span class="string">"\r"</span>, <span class="string">"\""</span>, JSON, <span class="string">"\\"</span>, apply,</div><div class="line">    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,</div><div class="line">    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,</div><div class="line">    lastIndex, length, parse, prototype, push, replace, slice, stringify,</div><div class="line">    <span class="built_in">test</span>, toJSON, toString, valueOf</div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line">// Create a JSON object only <span class="keyword">if</span> one does not already exist. We create the</div><div class="line">// methods <span class="keyword">in</span> a closure to avoid creating global variables.</div><div class="line"></div><div class="line"><span class="keyword">if</span> (typeof JSON !== <span class="string">'object'</span>) &#123;</div><div class="line">    JSON = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    <span class="string">'use strict'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">function</span> f(n) &#123;</div><div class="line">        // Format integers to have at least two digits.</div><div class="line">        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (typeof Date.prototype.toJSON !== <span class="string">'function'</span>) &#123;</div><div class="line"></div><div class="line">        Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line"></div><div class="line">            <span class="built_in">return</span> isFinite(this.valueOf())</div><div class="line">                ? this.getUTCFullYear()     + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                    f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCSeconds())   + <span class="string">'Z'</span></div><div class="line">                : null;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        String.prototype.toJSON      =</div><div class="line">            Number.prototype.toJSON  =</div><div class="line">            Boolean.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                <span class="built_in">return</span> this.valueOf();</div><div class="line">            &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</div><div class="line">        escapable = /[\\\<span class="string">"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</span></div><div class="line">        gap,</div><div class="line">        indent,</div><div class="line">        meta = &#123;    // table of character substitutions</div><div class="line">            '\b': '\\b',</div><div class="line">            '\t': '\\t',</div><div class="line">            '\n': '\\n',</div><div class="line">            '\f': '\\f',</div><div class="line">            '\r': '\\r',</div><div class="line">            '"<span class="string">' : '</span>\\<span class="string">"',</span></div><div class="line">            '\\': '\\\\'</div><div class="line">        &#125;,</div><div class="line">        rep;</div><div class="line"></div><div class="line"></div><div class="line">    function quote(string) &#123;</div><div class="line"></div><div class="line">// If the string contains no control characters, no quote characters, and no</div><div class="line">// backslash characters, then we can safely slap some quotes around it.</div><div class="line">// Otherwise we must also replace the offending characters with safe escape</div><div class="line">// sequences.</div><div class="line"></div><div class="line">        escapable.lastIndex = 0;</div><div class="line">        return escapable.test(string) ? '"<span class="string">' + string.replace(escapable, function (a) &#123;</span></div><div class="line">            var c = meta[a];</div><div class="line">            return typeof c === 'string<span class="string">'</span></div><div class="line">                ? c</div><div class="line">                : '\\u<span class="string">' + ('</span>0000<span class="string">' + a.charCodeAt(0).toString(16)).slice(-4);</span></div><div class="line">        &#125;) + '<span class="string">"' : '"</span><span class="string">' + string + '</span><span class="string">"';</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    function str(key, holder) &#123;</div><div class="line"></div><div class="line">// Produce a string from holder[key].</div><div class="line"></div><div class="line">        var i,          // The loop counter.</div><div class="line">            k,          // The member key.</div><div class="line">            v,          // The member value.</div><div class="line">            length,</div><div class="line">            mind = gap,</div><div class="line">            partial,</div><div class="line">            value = holder[key];</div><div class="line"></div><div class="line">// If the value has a toJSON method, call it to obtain a replacement value.</div><div class="line"></div><div class="line">        if (value &amp;&amp; typeof value === 'object' &amp;&amp;</div><div class="line">                typeof value.toJSON === 'function') &#123;</div><div class="line">            value = value.toJSON(key);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// If we were called with a replacer function, then call the replacer to</div><div class="line">// obtain a replacement value.</div><div class="line"></div><div class="line">        if (typeof rep === 'function') &#123;</div><div class="line">            value = rep.call(holder, key, value);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// What happens next depends on the value's type.</div><div class="line"></div><div class="line">        switch (typeof value) &#123;</div><div class="line">        case 'string':</div><div class="line">            return quote(value);</div><div class="line"></div><div class="line">        case 'number':</div><div class="line"></div><div class="line">// JSON numbers must be finite. Encode non-finite numbers as null.</div><div class="line"></div><div class="line">            return isFinite(value) ? String(value) : 'null';</div><div class="line"></div><div class="line">        case 'boolean':</div><div class="line">        case 'null':</div><div class="line"></div><div class="line">// If the value is a boolean or null, convert it to a string. Note:</div><div class="line">// typeof null does not produce 'null'. The case is included here in</div><div class="line">// the remote chance that this gets fixed someday.</div><div class="line"></div><div class="line">            return String(value);</div><div class="line"></div><div class="line">// If the type is 'object', we might be dealing with an object or an array or</div><div class="line">// null.</div><div class="line"></div><div class="line">        case 'object':</div><div class="line"></div><div class="line">// Due to a specification blunder in ECMAScript, typeof null is 'object',</div><div class="line">// so watch out for that case.</div><div class="line"></div><div class="line">            if (!value) &#123;</div><div class="line">                return 'null';</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make an array to hold the partial results of stringifying this object value.</div><div class="line"></div><div class="line">            gap += indent;</div><div class="line">            partial = [];</div><div class="line"></div><div class="line">// Is the value an array?</div><div class="line"></div><div class="line">            if (Object.prototype.toString.apply(value) === '[object Array]') &#123;</div><div class="line"></div><div class="line">// The value is an array. Stringify every element. Use null as a placeholder</div><div class="line">// for non-JSON values.</div><div class="line"></div><div class="line">                length = value.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    partial[i] = str(i, value) || 'null';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// Join all of the elements together, separated with commas, and wrap them in</div><div class="line">// brackets.</div><div class="line"></div><div class="line">                v = partial.length === 0</div><div class="line">                    ? '[]'</div><div class="line">                    : gap</div><div class="line">                    ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'</div><div class="line">                    : '[' + partial.join(',') + ']';</div><div class="line">                gap = mind;</div><div class="line">                return v;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the replacer is an array, use it to select the members to be stringified.</div><div class="line"></div><div class="line">            if (rep &amp;&amp; typeof rep === 'object') &#123;</div><div class="line">                length = rep.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    if (typeof rep[i] === 'string') &#123;</div><div class="line">                        k = rep[i];</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; else &#123;</div><div class="line"></div><div class="line">// Otherwise, iterate through all of the keys in the object.</div><div class="line"></div><div class="line">                for (k in value) &#123;</div><div class="line">                    if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Join all of the member texts together, separated with commas,</div><div class="line">// and wrap them in braces.</div><div class="line"></div><div class="line">            v = partial.length === 0</div><div class="line">                ? '&#123;&#125;'</div><div class="line">                : gap</div><div class="line">                ? '&#123;\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '&#125;'</div><div class="line">                : '&#123;' + partial.join(',') + '&#125;';</div><div class="line">            gap = mind;</div><div class="line">            return v;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">// If the JSON object does not yet have a stringify method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.stringify !== 'function') &#123;</div><div class="line">        JSON.stringify = function (value, replacer, space) &#123;</div><div class="line"></div><div class="line">// The stringify method takes a value and an optional replacer, and an optional</div><div class="line">// space parameter, and returns a JSON text. The replacer can be a function</div><div class="line">// that can replace values, or an array of strings that will select the keys.</div><div class="line">// A default replacer method can be provided. Use of the space parameter can</div><div class="line">// produce text that is more easily readable.</div><div class="line"></div><div class="line">            var i;</div><div class="line">            gap = '';</div><div class="line">            indent = '';</div><div class="line"></div><div class="line">// If the space parameter is a number, make an indent string containing that</div><div class="line">// many spaces.</div><div class="line"></div><div class="line">            if (typeof space === 'number') &#123;</div><div class="line">                for (i = 0; i &lt; space; i += 1) &#123;</div><div class="line">                    indent += ' ';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// If the space parameter is a string, it will be used as the indent string.</div><div class="line"></div><div class="line">            &#125; else if (typeof space === 'string') &#123;</div><div class="line">                indent = space;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If there is a replacer, it must be a function or an array.</div><div class="line">// Otherwise, throw an error.</div><div class="line"></div><div class="line">            rep = replacer;</div><div class="line">            if (replacer &amp;&amp; typeof replacer !== 'function' &amp;&amp;</div><div class="line">                    (typeof replacer !== 'object' ||</div><div class="line">                    typeof replacer.length !== 'number')) &#123;</div><div class="line">                throw new Error('JSON.stringify');</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make a fake root object containing our value under the key of ''.</div><div class="line">// Return the result of stringifying the value.</div><div class="line"></div><div class="line">            return str('', &#123;'': value&#125;);</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">// If the JSON object does not yet have a parse method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.parse !== 'function') &#123;</div><div class="line">        JSON.parse = function (text, reviver) &#123;</div><div class="line"></div><div class="line">// The parse method takes a text and an optional reviver function, and returns</div><div class="line">// a JavaScript value if the text is a valid JSON text.</div><div class="line"></div><div class="line">            var j;</div><div class="line"></div><div class="line">            function walk(holder, key) &#123;</div><div class="line"></div><div class="line">// The walk method is used to recursively walk the resulting structure so</div><div class="line">// that modifications can be made.</div><div class="line"></div><div class="line">                var k, v, value = holder[key];</div><div class="line">                if (value &amp;&amp; typeof value === 'object') &#123;</div><div class="line">                    for (k in value) &#123;</div><div class="line">                        if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                            v = walk(value, k);</div><div class="line">                            if (v !== undefined) &#123;</div><div class="line">                                value[k] = v;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                delete value[k];</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                return reviver.call(holder, key, value);</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">// Parsing happens in four stages. In the first stage, we replace certain</div><div class="line">// Unicode characters with escape sequences. JavaScript handles many characters</div><div class="line">// incorrectly, either silently deleting them, or treating them as line endings.</div><div class="line"></div><div class="line">            text = String(text);</div><div class="line">            cx.lastIndex = 0;</div><div class="line">            if (cx.test(text)) &#123;</div><div class="line">                text = text.replace(cx, function (a) &#123;</div><div class="line">                    return '\\u' +</div><div class="line">                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// In the second stage, we run the text against regular expressions that look</div><div class="line">// for non-JSON patterns. We are especially concerned with '()' and 'new'</div><div class="line">// because they can cause invocation, and '=' because it can cause mutation.</div><div class="line">// But just to be safe, we want to reject all unexpected forms.</div><div class="line"></div><div class="line">// We split the second stage into 4 regexp operations in order to work around</div><div class="line">// crippling inefficiencies in IE's and Safari's regexp engines. First we</div><div class="line">// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we</div><div class="line">// replace all simple value tokens with ']' characters. Third, we delete all</div><div class="line">// open brackets that follow a colon or comma or that begin the text. Finally,</div><div class="line">// we look to see that the remaining characters are only whitespace or ']' or</div><div class="line">// ',' or ':' or '&#123;' or '&#125;'. If that is so, then the text is safe for eval.</div><div class="line"></div><div class="line">            if (/^[\],:&#123;&#125;\s]*$/</div><div class="line">                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g, <span class="string">'@'</span>)</div><div class="line">                        .replace(/<span class="string">"[^"</span>\\\n\r]*<span class="string">"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')</span></div><div class="line">                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) &#123;</div><div class="line"></div><div class="line">// In the third stage we use the eval function to compile the text into a</div><div class="line">// JavaScript structure. The '&#123;' operator is subject to a syntactic ambiguity</div><div class="line">// in JavaScript: it can begin a block or an object literal. We wrap the text</div><div class="line">// in parens to eliminate the ambiguity.</div><div class="line"></div><div class="line">                j = eval('(' + text + ')');</div><div class="line"></div><div class="line">// In the optional fourth stage, we recursively walk the new structure, passing</div><div class="line">// each name/value pair to a reviver function for possible transformation.</div><div class="line"></div><div class="line">                return typeof reviver === 'function'</div><div class="line">                    ? walk(&#123;'': j&#125;, '')</div><div class="line">                    : j;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the text is not JSON parseable, then a SyntaxError is thrown.</div><div class="line"></div><div class="line">            throw new SyntaxError('JSON.parse');</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/json-tool/" data-id="cj4tw8rxk0006swr36xugzrjm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-json2-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/json2-js/" class="article-date">
  <time datetime="2017-06-25T09:08:57.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/25/json2-js/">json.js 工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div></pre></td><td class="code"><pre><div class="line">    json2.js</div><div class="line">    2017-10-08</div><div class="line"></div><div class="line">    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.</div><div class="line"></div><div class="line">    See http://www.JSON.org/js.html</div><div class="line"></div><div class="line">    This code should be minified before deployment.</div><div class="line">    See http://javascript.crockford.com/jsmin.html</div><div class="line"></div><div class="line">    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO</div><div class="line">    NOT CONTROL.</div><div class="line"></div><div class="line">    This file creates a global JSON object containing two methods: stringify</div><div class="line">    and parse.</div><div class="line"></div><div class="line">        JSON.stringify(value, replacer, space)</div><div class="line">            value       any JavaScript value, usually an object or array.</div><div class="line"></div><div class="line">            replacer    an optional parameter that determines how object</div><div class="line">                        values are stringified <span class="keyword">for</span> objects. It can be a</div><div class="line">                        <span class="keyword">function</span> or an array of strings.</div><div class="line"></div><div class="line">            space       an optional parameter that specifies the indentation</div><div class="line">                        of nested structures. If it is omitted, the text will</div><div class="line">                        be packed without extra whitespace. If it is a number,</div><div class="line">                        it will specify the number of spaces to indent at each</div><div class="line">                        level. If it is a string (such as <span class="string">'\t'</span> or <span class="string">'&amp;nbsp;'</span>),</div><div class="line">                        it contains the characters used to indent at each level.</div><div class="line"></div><div class="line">            This method produces a JSON text from a JavaScript value.</div><div class="line"></div><div class="line">            When an object value is found, <span class="keyword">if</span> the object contains a toJSON</div><div class="line">            method, its toJSON method will be called and the result will be</div><div class="line">            stringified. A toJSON method does not serialize: it returns the</div><div class="line">            value represented by the name/value pair that should be serialized,</div><div class="line">            or undefined <span class="keyword">if</span> nothing should be serialized. The toJSON method</div><div class="line">            will be passed the key associated with the value, and this will be</div><div class="line">            bound to the value</div><div class="line"></div><div class="line">            For example, this would serialize Dates as ISO strings.</div><div class="line"></div><div class="line">                Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                    <span class="keyword">function</span> f(n) &#123;</div><div class="line">                        // Format integers to have at least two digits.</div><div class="line">                        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="built_in">return</span> this.getUTCFullYear()   + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                         f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                         f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                         f(this.getUTCSeconds())   + <span class="string">'Z'</span>;</div><div class="line">                &#125;;</div><div class="line"></div><div class="line">            You can provide an optional replacer method. It will be passed the</div><div class="line">            key and value of each member, with this bound to the containing</div><div class="line">            object. The value that is returned from your method will be</div><div class="line">            serialized. If your method returns undefined, <span class="keyword">then</span> the member will</div><div class="line">            be excluded from the serialization.</div><div class="line"></div><div class="line">            If the replacer parameter is an array of strings, <span class="keyword">then</span> it will be</div><div class="line">            used to select the members to be serialized. It filters the results</div><div class="line">            such that only members with keys listed <span class="keyword">in</span> the replacer array are</div><div class="line">            stringified.</div><div class="line"></div><div class="line">            Values that <span class="keyword">do</span> not have JSON representations, such as undefined or</div><div class="line">            <span class="built_in">functions</span>, will not be serialized. Such values <span class="keyword">in</span> objects will be</div><div class="line">            dropped; <span class="keyword">in</span> arrays they will be replaced with null. You can use</div><div class="line">            a replacer <span class="keyword">function</span> to replace those with JSON values.</div><div class="line">            JSON.stringify(undefined) returns undefined.</div><div class="line"></div><div class="line">            The optional space parameter produces a stringification of the</div><div class="line">            value that is filled with line breaks and indentation to make it</div><div class="line">            easier to <span class="built_in">read</span>.</div><div class="line"></div><div class="line">            If the space parameter is a non-empty string, <span class="keyword">then</span> that string will</div><div class="line">            be used <span class="keyword">for</span> indentation. If the space parameter is a number, <span class="keyword">then</span></div><div class="line">            the indentation will be that many spaces.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;]);</div><div class="line">            // text is <span class="string">'["e",&#123;"pluribus":"unum"&#125;]'</span></div><div class="line"></div><div class="line"></div><div class="line">            text = JSON.stringify([<span class="string">'e'</span>, &#123;pluribus: <span class="string">'unum'</span>&#125;], null, <span class="string">'\t'</span>);</div><div class="line">            // text is <span class="string">'[\n\t"e",\n\t&#123;\n\t\t"pluribus": "unum"\n\t&#125;\n]'</span></div><div class="line"></div><div class="line">            text = JSON.stringify([new Date()], <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                <span class="built_in">return</span> this[key] instanceof Date ?</div><div class="line">                    <span class="string">'Date('</span> + this[key] + <span class="string">')'</span> : value;</div><div class="line">            &#125;);</div><div class="line">            // text is <span class="string">'["Date(---current time---)"]'</span></div><div class="line"></div><div class="line">        JSON.parse(text, reviver)</div><div class="line">            This method parses a JSON text to produce an object or array.</div><div class="line">            It can throw a SyntaxError exception.</div><div class="line"></div><div class="line">            The optional reviver parameter is a <span class="keyword">function</span> that can filter and</div><div class="line">            transform the results. It receives each of the keys and values,</div><div class="line">            and its <span class="built_in">return</span> value is used instead of the original value.</div><div class="line">            If it returns what it received, <span class="keyword">then</span> the structure is not modified.</div><div class="line">            If it returns undefined <span class="keyword">then</span> the member is deleted.</div><div class="line"></div><div class="line">            Example:</div><div class="line"></div><div class="line">            // Parse the text. Values that look like ISO date strings will</div><div class="line">            // be converted to Date objects.</div><div class="line"></div><div class="line">            myData = JSON.parse(text, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var a;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span>) &#123;</div><div class="line">                    a =</div><div class="line">/^(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)T(\d&#123;2&#125;):(\d&#123;2&#125;):(\d&#123;2&#125;(?:\.\d*)?)Z$/.<span class="built_in">exec</span>(value);</div><div class="line">                    <span class="keyword">if</span> (a) &#123;</div><div class="line">                        <span class="built_in">return</span> new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],</div><div class="line">                            +a[5], +a[6]));</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            myData = JSON.parse(<span class="string">'["Date(09/09/2001)"]'</span>, <span class="keyword">function</span> (key, value) &#123;</div><div class="line">                var d;</div><div class="line">                <span class="keyword">if</span> (typeof value === <span class="string">'string'</span> &amp;&amp;</div><div class="line">                        value.slice(0, 5) === <span class="string">'Date('</span> &amp;&amp;</div><div class="line">                        value.slice(-1) === <span class="string">')'</span>) &#123;</div><div class="line">                    d = new Date(value.slice(5, -1));</div><div class="line">                    <span class="keyword">if</span> (d) &#123;</div><div class="line">                        <span class="built_in">return</span> d;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">return</span> value;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line"></div><div class="line">    This is a reference implementation. You are free to copy, modify, or</div><div class="line">    redistribute.</div><div class="line"></div><div class="line"></div><div class="line">jslint evil: <span class="literal">true</span>, regexp: <span class="literal">true</span> </div><div class="line"></div><div class="line">/*members <span class="string">""</span>, <span class="string">"\b"</span>, <span class="string">"\t"</span>, <span class="string">"\n"</span>, <span class="string">"\f"</span>, <span class="string">"\r"</span>, <span class="string">"\""</span>, JSON, <span class="string">"\\"</span>, apply,</div><div class="line">    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,</div><div class="line">    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,</div><div class="line">    lastIndex, length, parse, prototype, push, replace, slice, stringify,</div><div class="line">    <span class="built_in">test</span>, toJSON, toString, valueOf</div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line">// Create a JSON object only <span class="keyword">if</span> one does not already exist. We create the</div><div class="line">// methods <span class="keyword">in</span> a closure to avoid creating global variables.</div><div class="line"></div><div class="line"><span class="keyword">if</span> (typeof JSON !== <span class="string">'object'</span>) &#123;</div><div class="line">    JSON = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    <span class="string">'use strict'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">function</span> f(n) &#123;</div><div class="line">        // Format integers to have at least two digits.</div><div class="line">        <span class="built_in">return</span> n &lt; 10 ? <span class="string">'0'</span> + n : n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (typeof Date.prototype.toJSON !== <span class="string">'function'</span>) &#123;</div><div class="line"></div><div class="line">        Date.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line"></div><div class="line">            <span class="built_in">return</span> isFinite(this.valueOf())</div><div class="line">                ? this.getUTCFullYear()     + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCMonth() + 1) + <span class="string">'-'</span> +</div><div class="line">                    f(this.getUTCDate())      + <span class="string">'T'</span> +</div><div class="line">                    f(this.getUTCHours())     + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCMinutes())   + <span class="string">':'</span> +</div><div class="line">                    f(this.getUTCSeconds())   + <span class="string">'Z'</span></div><div class="line">                : null;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        String.prototype.toJSON      =</div><div class="line">            Number.prototype.toJSON  =</div><div class="line">            Boolean.prototype.toJSON = <span class="keyword">function</span> (key) &#123;</div><div class="line">                <span class="built_in">return</span> this.valueOf();</div><div class="line">            &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</div><div class="line">        escapable = /[\\\<span class="string">"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,</span></div><div class="line">        gap,</div><div class="line">        indent,</div><div class="line">        meta = &#123;    // table of character substitutions</div><div class="line">            '\b': '\\b',</div><div class="line">            '\t': '\\t',</div><div class="line">            '\n': '\\n',</div><div class="line">            '\f': '\\f',</div><div class="line">            '\r': '\\r',</div><div class="line">            '"<span class="string">' : '</span>\\<span class="string">"',</span></div><div class="line">            '\\': '\\\\'</div><div class="line">        &#125;,</div><div class="line">        rep;</div><div class="line"></div><div class="line"></div><div class="line">    function quote(string) &#123;</div><div class="line"></div><div class="line">// If the string contains no control characters, no quote characters, and no</div><div class="line">// backslash characters, then we can safely slap some quotes around it.</div><div class="line">// Otherwise we must also replace the offending characters with safe escape</div><div class="line">// sequences.</div><div class="line"></div><div class="line">        escapable.lastIndex = 0;</div><div class="line">        return escapable.test(string) ? '"<span class="string">' + string.replace(escapable, function (a) &#123;</span></div><div class="line">            var c = meta[a];</div><div class="line">            return typeof c === 'string<span class="string">'</span></div><div class="line">                ? c</div><div class="line">                : '\\u<span class="string">' + ('</span>0000<span class="string">' + a.charCodeAt(0).toString(16)).slice(-4);</span></div><div class="line">        &#125;) + '<span class="string">"' : '"</span><span class="string">' + string + '</span><span class="string">"';</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    function str(key, holder) &#123;</div><div class="line"></div><div class="line">// Produce a string from holder[key].</div><div class="line"></div><div class="line">        var i,          // The loop counter.</div><div class="line">            k,          // The member key.</div><div class="line">            v,          // The member value.</div><div class="line">            length,</div><div class="line">            mind = gap,</div><div class="line">            partial,</div><div class="line">            value = holder[key];</div><div class="line"></div><div class="line">// If the value has a toJSON method, call it to obtain a replacement value.</div><div class="line"></div><div class="line">        if (value &amp;&amp; typeof value === 'object' &amp;&amp;</div><div class="line">                typeof value.toJSON === 'function') &#123;</div><div class="line">            value = value.toJSON(key);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// If we were called with a replacer function, then call the replacer to</div><div class="line">// obtain a replacement value.</div><div class="line"></div><div class="line">        if (typeof rep === 'function') &#123;</div><div class="line">            value = rep.call(holder, key, value);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">// What happens next depends on the value's type.</div><div class="line"></div><div class="line">        switch (typeof value) &#123;</div><div class="line">        case 'string':</div><div class="line">            return quote(value);</div><div class="line"></div><div class="line">        case 'number':</div><div class="line"></div><div class="line">// JSON numbers must be finite. Encode non-finite numbers as null.</div><div class="line"></div><div class="line">            return isFinite(value) ? String(value) : 'null';</div><div class="line"></div><div class="line">        case 'boolean':</div><div class="line">        case 'null':</div><div class="line"></div><div class="line">// If the value is a boolean or null, convert it to a string. Note:</div><div class="line">// typeof null does not produce 'null'. The case is included here in</div><div class="line">// the remote chance that this gets fixed someday.</div><div class="line"></div><div class="line">            return String(value);</div><div class="line"></div><div class="line">// If the type is 'object', we might be dealing with an object or an array or</div><div class="line">// null.</div><div class="line"></div><div class="line">        case 'object':</div><div class="line"></div><div class="line">// Due to a specification blunder in ECMAScript, typeof null is 'object',</div><div class="line">// so watch out for that case.</div><div class="line"></div><div class="line">            if (!value) &#123;</div><div class="line">                return 'null';</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make an array to hold the partial results of stringifying this object value.</div><div class="line"></div><div class="line">            gap += indent;</div><div class="line">            partial = [];</div><div class="line"></div><div class="line">// Is the value an array?</div><div class="line"></div><div class="line">            if (Object.prototype.toString.apply(value) === '[object Array]') &#123;</div><div class="line"></div><div class="line">// The value is an array. Stringify every element. Use null as a placeholder</div><div class="line">// for non-JSON values.</div><div class="line"></div><div class="line">                length = value.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    partial[i] = str(i, value) || 'null';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// Join all of the elements together, separated with commas, and wrap them in</div><div class="line">// brackets.</div><div class="line"></div><div class="line">                v = partial.length === 0</div><div class="line">                    ? '[]'</div><div class="line">                    : gap</div><div class="line">                    ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'</div><div class="line">                    : '[' + partial.join(',') + ']';</div><div class="line">                gap = mind;</div><div class="line">                return v;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the replacer is an array, use it to select the members to be stringified.</div><div class="line"></div><div class="line">            if (rep &amp;&amp; typeof rep === 'object') &#123;</div><div class="line">                length = rep.length;</div><div class="line">                for (i = 0; i &lt; length; i += 1) &#123;</div><div class="line">                    if (typeof rep[i] === 'string') &#123;</div><div class="line">                        k = rep[i];</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; else &#123;</div><div class="line"></div><div class="line">// Otherwise, iterate through all of the keys in the object.</div><div class="line"></div><div class="line">                for (k in value) &#123;</div><div class="line">                    if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                        v = str(k, value);</div><div class="line">                        if (v) &#123;</div><div class="line">                            partial.push(quote(k) + (gap ? ': ' : ':') + v);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Join all of the member texts together, separated with commas,</div><div class="line">// and wrap them in braces.</div><div class="line"></div><div class="line">            v = partial.length === 0</div><div class="line">                ? '&#123;&#125;'</div><div class="line">                : gap</div><div class="line">                ? '&#123;\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '&#125;'</div><div class="line">                : '&#123;' + partial.join(',') + '&#125;';</div><div class="line">            gap = mind;</div><div class="line">            return v;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">// If the JSON object does not yet have a stringify method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.stringify !== 'function') &#123;</div><div class="line">        JSON.stringify = function (value, replacer, space) &#123;</div><div class="line"></div><div class="line">// The stringify method takes a value and an optional replacer, and an optional</div><div class="line">// space parameter, and returns a JSON text. The replacer can be a function</div><div class="line">// that can replace values, or an array of strings that will select the keys.</div><div class="line">// A default replacer method can be provided. Use of the space parameter can</div><div class="line">// produce text that is more easily readable.</div><div class="line"></div><div class="line">            var i;</div><div class="line">            gap = '';</div><div class="line">            indent = '';</div><div class="line"></div><div class="line">// If the space parameter is a number, make an indent string containing that</div><div class="line">// many spaces.</div><div class="line"></div><div class="line">            if (typeof space === 'number') &#123;</div><div class="line">                for (i = 0; i &lt; space; i += 1) &#123;</div><div class="line">                    indent += ' ';</div><div class="line">                &#125;</div><div class="line"></div><div class="line">// If the space parameter is a string, it will be used as the indent string.</div><div class="line"></div><div class="line">            &#125; else if (typeof space === 'string') &#123;</div><div class="line">                indent = space;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If there is a replacer, it must be a function or an array.</div><div class="line">// Otherwise, throw an error.</div><div class="line"></div><div class="line">            rep = replacer;</div><div class="line">            if (replacer &amp;&amp; typeof replacer !== 'function' &amp;&amp;</div><div class="line">                    (typeof replacer !== 'object' ||</div><div class="line">                    typeof replacer.length !== 'number')) &#123;</div><div class="line">                throw new Error('JSON.stringify');</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// Make a fake root object containing our value under the key of ''.</div><div class="line">// Return the result of stringifying the value.</div><div class="line"></div><div class="line">            return str('', &#123;'': value&#125;);</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">// If the JSON object does not yet have a parse method, give it one.</div><div class="line"></div><div class="line">    if (typeof JSON.parse !== 'function') &#123;</div><div class="line">        JSON.parse = function (text, reviver) &#123;</div><div class="line"></div><div class="line">// The parse method takes a text and an optional reviver function, and returns</div><div class="line">// a JavaScript value if the text is a valid JSON text.</div><div class="line"></div><div class="line">            var j;</div><div class="line"></div><div class="line">            function walk(holder, key) &#123;</div><div class="line"></div><div class="line">// The walk method is used to recursively walk the resulting structure so</div><div class="line">// that modifications can be made.</div><div class="line"></div><div class="line">                var k, v, value = holder[key];</div><div class="line">                if (value &amp;&amp; typeof value === 'object') &#123;</div><div class="line">                    for (k in value) &#123;</div><div class="line">                        if (Object.prototype.hasOwnProperty.call(value, k)) &#123;</div><div class="line">                            v = walk(value, k);</div><div class="line">                            if (v !== undefined) &#123;</div><div class="line">                                value[k] = v;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                delete value[k];</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                return reviver.call(holder, key, value);</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">// Parsing happens in four stages. In the first stage, we replace certain</div><div class="line">// Unicode characters with escape sequences. JavaScript handles many characters</div><div class="line">// incorrectly, either silently deleting them, or treating them as line endings.</div><div class="line"></div><div class="line">            text = String(text);</div><div class="line">            cx.lastIndex = 0;</div><div class="line">            if (cx.test(text)) &#123;</div><div class="line">                text = text.replace(cx, function (a) &#123;</div><div class="line">                    return '\\u' +</div><div class="line">                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// In the second stage, we run the text against regular expressions that look</div><div class="line">// for non-JSON patterns. We are especially concerned with '()' and 'new'</div><div class="line">// because they can cause invocation, and '=' because it can cause mutation.</div><div class="line">// But just to be safe, we want to reject all unexpected forms.</div><div class="line"></div><div class="line">// We split the second stage into 4 regexp operations in order to work around</div><div class="line">// crippling inefficiencies in IE's and Safari's regexp engines. First we</div><div class="line">// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we</div><div class="line">// replace all simple value tokens with ']' characters. Third, we delete all</div><div class="line">// open brackets that follow a colon or comma or that begin the text. Finally,</div><div class="line">// we look to see that the remaining characters are only whitespace or ']' or</div><div class="line">// ',' or ':' or '&#123;' or '&#125;'. If that is so, then the text is safe for eval.</div><div class="line"></div><div class="line">            if (/^[\],:&#123;&#125;\s]*$/</div><div class="line">                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g, <span class="string">'@'</span>)</div><div class="line">                        .replace(/<span class="string">"[^"</span>\\\n\r]*<span class="string">"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')</span></div><div class="line">                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) &#123;</div><div class="line"></div><div class="line">// In the third stage we use the eval function to compile the text into a</div><div class="line">// JavaScript structure. The '&#123;' operator is subject to a syntactic ambiguity</div><div class="line">// in JavaScript: it can begin a block or an object literal. We wrap the text</div><div class="line">// in parens to eliminate the ambiguity.</div><div class="line"></div><div class="line">                j = eval('(' + text + ')');</div><div class="line"></div><div class="line">// In the optional fourth stage, we recursively walk the new structure, passing</div><div class="line">// each name/value pair to a reviver function for possible transformation.</div><div class="line"></div><div class="line">                return typeof reviver === 'function'</div><div class="line">                    ? walk(&#123;'': j&#125;, '')</div><div class="line">                    : j;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">// If the text is not JSON parseable, then a SyntaxError is thrown.</div><div class="line"></div><div class="line">            throw new SyntaxError('JSON.parse');</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/json2-js/" data-id="cj4tw8rxk0007swr3ax76ejpf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-How-to-build-myBlog" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/How-to-build-myBlog/" class="article-date">
  <time datetime="2017-06-25T08:09:19.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/25/How-to-build-myBlog/">How to build myBlog</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h1><ol>
<li><p>安装hexo<br>npm install hexo-cli -g</p>
</li>
<li><p>创建一个博客文件夹<br>在文件夹中执行    hexo init</p>
</li>
<li><p>在文件夹中直接执行 hexo s  在本地测试网页效果</p>
</li>
</ol>
<h2 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h2><p>hexo new “文章名称”</p>
<p>这句命令执行完毕之后，会在source/_posts/ 中生成以文章名为文件名的markdown文件</p>
<h2 id="编辑文章"><a href="#编辑文章" class="headerlink" title="编辑文章"></a>编辑文章</h2><p>找到对应的markdown文件，编辑内容即可</p>
<h2 id="生成html"><a href="#生成html" class="headerlink" title="生成html"></a>生成html</h2><p>hexo g</p>
<p>执行这条命令之后，会在public目录下生成所有的静态页面，只要将该目录下所有的文件进行发布，发布到github上，就可以通过github的静态页面托管服务来访问页面了</p>
<h2 id="如何使用hexo-d-来发布网站呢"><a href="#如何使用hexo-d-来发布网站呢" class="headerlink" title="如何使用hexo d 来发布网站呢"></a>如何使用hexo d 来发布网站呢</h2><ol>
<li><p>安装 hexo-deployer-git<br>npm install hexo-deployer-git –save</p>
</li>
<li><p>配置网站根目录下面的_config.yml<br>配置最下面的deloy节点<br>deploy:</p>
<ul>
<li>type: git<br>repo: github静态页面托管项目的地址</li>
</ul>
</li>
</ol>
<p>2.1 在public目录下执行 git init 并进行一次提交</p>
<ol>
<li><p>按照正常流程创建博客， 编辑博客</p>
</li>
<li><p>执行hexo g</p>
</li>
<li><p>在 public 目录下去执行 hexo d</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/How-to-build-myBlog/" data-id="cj4tw8rx40002swr3axn98mb9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-myBlog" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/25/myBlog/" class="article-date">
  <time datetime="2017-06-25T08:09:19.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/25/myBlog/">How to build myBlog</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h1><ol>
<li><p>安装hexo<br>npm install hexo-cli -g</p>
</li>
<li><p>创建一个博客文件夹<br>在文件夹中执行    hexo init</p>
</li>
<li><p>在文件夹中直接执行 hexo s  在本地测试网页效果</p>
</li>
</ol>
<h2 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h2><p>hexo new “文章名称”</p>
<p>这句命令执行完毕之后，会在source/_posts/ 中生成以文章名为文件名的markdown文件</p>
<h2 id="编辑文章"><a href="#编辑文章" class="headerlink" title="编辑文章"></a>编辑文章</h2><p>找到对应的markdown文件，编辑内容即可</p>
<h2 id="生成html"><a href="#生成html" class="headerlink" title="生成html"></a>生成html</h2><p>hexo g</p>
<p>执行这条命令之后，会在public目录下生成所有的静态页面，只要将该目录下所有的文件进行发布，发布到github上，就可以通过github的静态页面托管服务来访问页面了</p>
<h2 id="如何使用hexo-d-来发布网站呢"><a href="#如何使用hexo-d-来发布网站呢" class="headerlink" title="如何使用hexo d 来发布网站呢"></a>如何使用hexo d 来发布网站呢</h2><ol>
<li><p>安装 hexo-deployer-git<br>npm install hexo-deployer-git –save</p>
</li>
<li><p>配置网站根目录下面的_config.yml<br>配置最下面的deloy节点<br>deploy:</p>
<ul>
<li>type: git<br>repo: github静态页面托管项目的地址</li>
</ul>
</li>
</ol>
<p>2.1 在public目录下执行 git init 并进行一次提交</p>
<ol>
<li><p>按照正常流程创建博客， 编辑博客</p>
</li>
<li><p>执行hexo g</p>
</li>
<li><p>在 public 目录下去执行 hexo d</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/25/myBlog/" data-id="cj4tw8rxk0008swr3pd1n7r3f" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-reg" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/13/reg/" class="article-date">
  <time datetime="2014-07-13T11:03:39.000Z" itemprop="datePublished">2014-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/13/reg/">常用正则表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="关于reg"><a href="#关于reg" class="headerlink" title="关于reg"></a>关于reg</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">一、校验数字的表达式</div><div class="line"> 1 数字：^[0-9]*$</div><div class="line"> 2 n位的数字：^\d&#123;n&#125;$</div><div class="line"> 3 至少n位的数字：^\d&#123;n,&#125;$</div><div class="line"> 4 m-n位的数字：^\d&#123;m,n&#125;$</div><div class="line"> 5 零和非零开头的数字：^(0|[1-9][0-9]*)$</div><div class="line"> 6 非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$</div><div class="line"> 7 带1-2位小数的正数或负数：^(\-)?\d+(\.\d&#123;1,2&#125;)?$</div><div class="line"> 8 正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$</div><div class="line"> 9 有两位小数的正实数：^[0-9]+(.[0-9]&#123;2&#125;)?$</div><div class="line">10 有1~3位小数的正实数：^[0-9]+(.[0-9]&#123;1,3&#125;)?$</div><div class="line">11 非零的正整数：^[1-9]\d*$ 或 ^([1-9][0-9]*)&#123;1,3&#125;$ 或 ^\+?[1-9][0-9]*$</div><div class="line">12 非零的负整数：^\-[1-9][]0-9<span class="string">"*$ 或 ^-[1-9]\d*$</span></div><div class="line">13 非负整数：^\d+$ 或 ^[1-9]\d*|0$</div><div class="line">14 非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</div><div class="line">15 非负浮点数：^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</div><div class="line">16 非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</div><div class="line">17 正浮点数：^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</div><div class="line">18 负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</div><div class="line">19 浮点数：^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</div><div class="line">二、校验字符的表达式</div><div class="line"> 1 汉字：^[\u4e00-\u9fa5]&#123;0,&#125;$</div><div class="line"> 2 英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]&#123;4,40&#125;$</div><div class="line"> 3 长度为3-20的所有字符：^.&#123;3,20&#125;$</div><div class="line"> 4 由26个英文字母组成的字符串：^[A-Za-z]+$</div><div class="line"> 5 由26个大写英文字母组成的字符串：^[A-Z]+$</div><div class="line"> 6 由26个小写英文字母组成的字符串：^[a-z]+$</div><div class="line"> 7 由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$</div><div class="line"> 8 由数字、26个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w&#123;3,20&#125;$</div><div class="line"> 9 中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$</div><div class="line">10 中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]&#123;2,20&#125;$</div><div class="line">11 可以输入含有^%&amp;',;=?$\"等字符：[^%&amp;',;=?$\x22]+</div><div class="line">12 禁止输入含有~的字符：[^~\x22]+</div><div class="line">三、特殊需求表达式</div><div class="line"> 1 Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</div><div class="line"> 2 域名：[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?</div><div class="line"> 3 InternetURL：[a-zA-z]+://[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</div><div class="line"> 4 手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</div><div class="line"> 5 电话号码("XXX-XXXXXXX<span class="string">"、"</span>XXXX-XXXXXXXX<span class="string">"、"</span>XXX-XXXXXXX<span class="string">"、"</span>XXX-XXXXXXXX<span class="string">"、"</span>XXXXXXX<span class="string">"和"</span>XXXXXXXX)：^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$ </div><div class="line"> 6 国内电话号码(0511-4405222、021-87888822)：\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;</div><div class="line"> 7 身份证号(15位、18位数字)：^\d&#123;15&#125;|\d&#123;18&#125;$</div><div class="line"> 8 短身份证号码(数字、字母x结尾)：^([0-9])&#123;7,18&#125;(x|X)?$ 或 ^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</div><div class="line"> 9 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</div><div class="line">10 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w&#123;5,17&#125;$</div><div class="line">11 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$  </div><div class="line">12 日期格式：^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</div><div class="line">13 一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</div><div class="line">14 一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$ </div><div class="line">15 钱的输入格式：</div><div class="line">16    1.有四种钱的表示形式我们可以接受:<span class="string">"10000.00"</span> 和 <span class="string">"10,000.00"</span>, 和没有 <span class="string">"分"</span> 的 <span class="string">"10000"</span> 和 <span class="string">"10,000"</span>：^[1-9][0-9]*$ </div><div class="line">17    2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符<span class="string">"0"</span>不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$ </div><div class="line">18    3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$ </div><div class="line">19    4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$ </div><div class="line">20    5.必须说明的是,小数点后面至少应该有1位数,所以<span class="string">"10."</span>是不通过的,但是 <span class="string">"10"</span> 和 <span class="string">"10.2"</span> 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$ </div><div class="line">21    6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$ </div><div class="line">22    7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$ </div><div class="line">23    8.1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$ </div><div class="line">24    备注：这就是最终结果了,别忘了<span class="string">"+"</span>可以用<span class="string">"*"</span>替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</div><div class="line">25 xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</div><div class="line">26 中文字符的正则表达式：[\u4e00-\u9fa5]</div><div class="line">27 双字节字符：[^\x00-\xff]    (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</div><div class="line">28 空白行的正则表达式：\n\s*\r    (可以用来删除空白行)</div><div class="line">29 HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\1&gt;|&lt;.*? /&gt;    (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</div><div class="line">30 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$)    (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</div><div class="line">31 腾讯QQ号：[1-9][0-9]&#123;4,&#125;    (腾讯QQ号从10000开始)</div><div class="line">32 中国邮政编码：[1-9]\d&#123;5&#125;(?!\d)    (中国邮政编码为6位数字)</div><div class="line">33 IP地址：\d+\.\d+\.\d+\.\d+    (提取IP地址时有用)</div><div class="line"></div><div class="line">密码强度:</div><div class="line">^([a-z].*[A-Z])|([A-Z].*[a-z])$</div><div class="line">只有大小写字母</div><div class="line">^([a-z].*[0-9])|([A-Z].*[0-9])|[0-9].*[a-zA-Z]$</div><div class="line">大小写字母和数字</div><div class="line">^[A-Za-z0-9]+[_][A-Za-z0-9]*</div><div class="line">大小写字母、数字和下划线</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/13/reg/" data-id="cj4tw8rxz0009swr3wlh2fv5u" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/07/first/">first</a>
          </li>
        
          <li>
            <a href="/2017/07/07/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/06/25/AjaxXHR-js/">ajax Xhr</a>
          </li>
        
          <li>
            <a href="/2017/06/25/again-test/">again test</a>
          </li>
        
          <li>
            <a href="/2017/06/25/json-js/">json.js</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>